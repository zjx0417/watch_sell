!function(){function a(a){var n={tabNavId:"#navid",tabConId:"#conid",callback:a.callback},i=wbiao.extend(n,a);$(i.tabNavId+" ul").on("click","li",function(){var a=$(this),n=a.index();a.addClass("on").siblings().removeClass("on"),$(i.tabConId).find(".gnTabs_block").eq(n).show().siblings().hide(),i.callback&&i.callback.call(this,n)})}wbiao.extend(wbiao,{GnTab:a})}();
!function(){function t(){function t(){var t,e={},o=[];$(".cart_goods_list .normal_goods").each(function(){var t=$(this),s=t.find(".act_txt").attr("act-code"),a=t.find(".g_txt").attr("goods-code"),i=t.find(".g_txt .p2 em i").text();e={activityCode:s||0,goodsCode:a,quantity:i},o.push(e)}),t={calcItemModelList:o,siteRange:1},$.ajax({type:"POST",cache:!1,dataType:"json",url:"/cart/getGoodsAmount",data:{goodsArr:t},success:function(t){0==t.info.error&&$(".slide_cart .cart_bottom .b_left b").html("￥"+t.data.goodsAmount)}})}function e(){$.ajax({type:"POST",cache:!1,dataType:"json",url:"/cart/getCartGoods",data:{},success:function(e){0==e.info.error&&($.trim(e.html)?$(".slide_cart .cart_goods_list").html(e.html).siblings(".cart_bottom").removeClass("h"):$(".slide_cart .cart_empty").removeClass("h").siblings(".cart_bottom").addClass("h"),t())}})}function o(){wb.corsAjax({url:"/member/getFootprints/",success:function(t){0==t.info.error&&($.trim(t.html)?$(".slide_footprints .keep_goods").html(t.html).siblings(".look_more").removeClass("h"):$(".slide_footprints .footprints_empty").removeClass("h"))}})}function s(){wb.corsAjax({url:"/member/getGoodsCollectList",success:function(t){0==t.info.error&&($.trim(t.html)?$(".keep_goods_floor .keep_goods").html(t.html).siblings(".look_more").removeClass("h"):$(".keep_goods_floor .keep_empty").removeClass("h"))}})}function a(){wb.corsAjax({url:"/member/getShopCollectList",success:function(t){0==t.info.error&&($.trim(t.html)?$(".keep_store_floor .keep_store").html(t.html).siblings(".look_more").removeClass("h"):$(".keep_store_floor .keep_empty").removeClass("h"))}})}var i=this;this.cartBadge={val:function(t){var e=$(".W_pt_panel .panel_bottom .w_cart .cart_num, .W_pt_panel .slide_floor .cart_bottom .b_left i"),o=Number(e.text());return isNaN(Number(t))?o:t<=0?(e.text(0),e.addClass("h"),t):(e.text(t),void e.removeClass("h"))}},this.addToCart=function(t){var e=Number($(".cart_count").text());wb.globalCart.add({goodsCode:t._goodsCode,quantity:1,salePrice:t._salePrice,success:function(t){1===wb.isLogin&&t&&(t.info.error>0?layer.msg(t.info.message||"网络异常",{time:3e3}):(wb.gnHeader.cartBadge.val(1+e),wb.rightNav.cartBadge.val(1+e),layer.msg("成功加入购物车",{time:3e3})))}})},this.getRightCartNum=function(){$(".W_pt_panel .panel_bottom .w_cart .cart_num").length>0&&wb.globalCart.getQuantity({success:function(t){i.cartBadge.val(t)}})},function(){var t=$(".W_pt_panel .pt_ntalk"),e=sessionStorage.getItem("kfShowOrNot");try{wb.corsAjax({subWbDomain:"gapi",url:"/pub/ntalkWorks/",success:function(t){0==t.info.error&&($("#nt-main-tit").text(t.data.pcTitle),$("#nt-sub-tit").text(t.data.pcDetail),$("#nt-btn01").text(t.data.pcLeftBtn),$("#nt-btn02").text(t.data.pcRightBtn))},error:function(t){$.ajaxSetup({type:"POST",data:{wTk:$.cookie("wTk")}}),wb.corsAjax({subWbDomain:"gapi",url:"/pub/ntalkWorks/",success:function(t){0==t.info.error&&($("#nt-main-tit").text(t.data.pcTitle),$("#nt-sub-tit").text(t.data.pcDetail),$("#nt-btn01").text(t.data.pcLeftBtn),$("#nt-btn02").text(t.data.pcRightBtn))}})}})}catch(t){}setTimeout(function(){"kfIsShow"!=e&&(t.find(".ntalk_pop").stop().fadeIn(),sessionStorage.setItem("kfShowOrNot","kfIsShow"))},1e4),t.mouseenter(function(){$(this).find(".ntalk_pop").stop().fadeIn()}).mouseleave(function(){$(this).find(".ntalk_pop").stop().fadeOut()}),t.find(".icon-a-r-close06").click(function(){t.find(".ntalk_pop").stop().fadeOut()})}(),function(){var t=$(".W_pt_panel .pt_panel_box .panel_bottom"),n=t.find(".w_cart .cart_num"),r=$(".W_pt_panel .slide_right_floor");n.text()>=99&&n.text("···"),t.find(".w_tool_tab").hover(function(){$(this).children(".w_tool_txt,.w_arrow").stop().fadeToggle()}),t.on("click",".show_right",function(){var t=$(this);t.addClass("on").siblings().removeClass("on").parents(".pt_panel_box").addClass("slide_left"),t.hasClass("w_cart")?(r.find(".slide_cart").addClass("show"),r.find(".slide_keep, .slide_footprints").removeClass("show"),1==wb.isLogin?(r.find(".cart_goods_list").removeClass("h").siblings(".slide_cart .login_tips, .slide_cart .cart_empty").addClass("h"),e()):r.find(".slide_cart .login_tips, .slide_cart .cart_empty").removeClass("h").siblings(".cart_goods_list").addClass("h")):t.hasClass("w_keep")?(r.find(".slide_keep").addClass("show"),r.find(".slide_cart,.slide_footprints").removeClass("show"),1==wb.isLogin?(r.find(".W_gnTab_content").removeClass("h").siblings(".slide_keep .login_tips").addClass("h"),s()):r.find(".slide_keep .login_tips,.slide_keep .nologin_empty").removeClass("h").siblings(".W_gnTab_content").addClass("h")):t.hasClass("w_footprints")&&(r.find(".slide_footprints").addClass("show"),r.find(".slide_cart,.slide_keep").removeClass("show"),1==wb.isLogin?(r.find(".keep_goods").removeClass("h").siblings(".slide_footprints .login_tips").addClass("h"),o()):r.find(".slide_footprints .login_tips, .slide_footprints .footprints_empty").removeClass("h").siblings(".keep_goods").addClass("h")),r.addClass("show")}).on("click",".w_to_top",function(){return $("html,body").stop().animate({scrollTop:0},500),!1}),r.on("click",".icon-a-r-close06",function(){$(".pt_panel_box").removeClass("slide_left"),r.removeClass("show"),t.find(".show_right").removeClass("on")}).on("click",".goods_block .delete_g",function(){var t=$(this),o=t.siblings(".g_txt").attr("goods-code"),s=t.parents(".goods_block").attr("cart-id");t.parent(".goods_block").remove(),wb.globalCart.remove(o,s,{success:function(t){0==t.info.error&&(e(),i.getRightCartNum(),wb.gnHeader.getHeadCartNum&&wb.gnHeader.getHeadCartNum()),400===t.info.error&&layer.msg(d.info.message,{time:3e3}),403===t.info.error&&(location.href=wb.fillUpUserModuleUrl("/member/login",{domain:wb.domains().pu,referrer:location.href})),404===t.info.error&&layer.msg("网络异常，请稍后再试",{time:3e3}),500===t.info.error&&layer.msg("服务异常，请稍后再试",{time:3e3})}})}),wb.GnTab&&new wb.GnTab({tabNavId:"#tabnav01",tabConId:"#tabcon01",callback:function(t){0==t?s():1==t&&a()}})}(),i.getRightCartNum()}$(function(){wbiao.extend(wbiao,{rightNav:new t}),wb.isLogin||$(".W_pt_panel .panel_bottom .login_and_polite").removeClass("h"),$(".W_pt_panel").on("click",".slide_floor .keep_goods .goods_a .p3",function(){var t=$(this),e=t.parents(".goods_a").attr("goods-code"),o=Number(t.parents(".goods_a").find(".p2 em").text());wb.rightNav.addToCart({_goodsCode:e,_salePrice:o})}).on("click",".panel_bottom .login_and_polite",function(){location.href=wb.fillUpUserModuleUrl("/member/login",{domain:wb.domains().pu,referrer:location.href})}),wb.wbCustomerService||wb.extend(wb,{wbCustomerService:new wb.WbCustomerService}),wb.mjCustomerService||wb.extend(wb,{mjCustomerService:new wb.WbCustomerService({customerServiceCode:"wx_1000_1521086459453"})}),$(".W_pt_panel .pt_ntalk .ntalk_pre.CUSTOMER-SERVICE").click(function(){wb.wbCustomerService&&wb.wbCustomerService.open()}),$(".W_pt_panel .pt_ntalk .ntalk_pre2.CUSTOMER-SERVICE").click(function(){wb.mjCustomerService&&wb.mjCustomerService.open()})})}();
